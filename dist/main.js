(()=>{"use strict";var e,t,r,i,s={860:(e,t,r)=>{r.d(t,{CI:()=>n,a9:()=>i,u8:()=>s});const i={ALL:"any",ESTATE:"estate",LAPTOPS:"laptops",CAMERA:"camera",CARS:"cars"},s=(i.ALL,i.ESTATE,i.LAPTOPS,i.CAMERA,i.CARS,{camera:{type:[{name:"Зеркальный",value:"slr",id:"mirror"},{name:"Цифровой",value:"digital",id:"digital"},{name:"Беззеркальный",value:"mirrorless",id:"mirrorless"}],matrix:[{name:"Любое",value:"any",selected:!0},{name:"1 МП",value:"1",selected:!1},{name:"3 МП",value:"3",selected:!1},{name:"5 МП",value:"5",selected:!1},{name:"7 МП",value:"7",selected:!1},{name:"10 МП",value:"10",selected:!1}],video:[{name:"Любое",value:"any",selected:!0},{name:"HD",value:"HD",selected:!1},{name:"Full HD",value:"full-hd",selected:!1},{name:"4K",value:"4K",selected:!1},{name:"5K",value:"5K",selected:!1}]},car:{productionYear:[{name:"1900",value:"1900",selected:!0},{name:"1940",value:"1940",selected:!1},{name:"1960",value:"1960",selected:!1},{name:"1980",value:"1980",selected:!1},{name:"2000",value:"2000",selected:!1}],transmission:[{name:"Любая",value:"any",id:"any_transmission",checked:!0},{name:"Механика",value:"mechanic",id:"mechanic_transmission",checked:!1},{name:"Автомат",value:"auto",id:"auto_transmission",checked:!1}],bodyType:[{name:"Седан",value:"sedan",id:"sedan"},{name:"Универсал",value:"universal",id:"universal"},{name:"Хэтчбэк",value:"hatchback",id:"hatchback"},{name:"Внедорожник",value:"suv",id:"jeep"},{name:"Купэ",value:"cupe",id:"cupe"}]},estate:{type:[{name:"Дом",value:"house",id:"house"},{name:"Квартира",value:"flat",id:"flat"},{name:"Апартаменты",value:"apartment",id:"apartments"}],roomsCount:[{name:"Любое",value:"any",id:"any_room",checked:!0},{name:"1",value:"1",id:"one",checked:!1},{name:"2",value:"2",id:"two",checked:!1},{name:"3",value:"3",id:"three",checked:!1},{name:"4",value:"4",id:"four",checked:!1},{name:"5+",value:"5",id:"fivemore",checked:!1}]},laptop:{type:[{name:"Ультрабук",value:"ultrabook",id:"ultra"},{name:"Домашний ноутбук",value:"home",id:"home"},{name:"Игровой ноутбук",value:"gaming",id:"gaming"}],ram:[{name:"Любой",value:"any",id:"any_ram",checked:!0},{name:"4 Гб",value:"4",id:"4gb",checked:!1},{name:"8 Гб",value:"8",id:"8gb",checked:!1},{name:"16 Гб",value:"16",id:"16gb",checked:!1}],screenSize:[{name:"Любая",value:"any",id:"any_diagonal",checked:!0},{name:"13",value:"13",id:"13in",checked:!1},{name:"14",value:"14",id:"14in",checked:!1},{name:"15",value:"15",id:"15in",checked:!1},{name:"17",value:"17",id:"17in",checked:!1}],cpu:[{name:"Intel Core i3",value:"i3",id:"i3"},{name:"Intel Core i5",value:"i5",id:"i5"},{name:"Intel Core i7",value:"i7",id:"i7"}]}}),n=5},472:(e,t,r)=>{r.d(t,{F:()=>s});var i=r(54);class s{constructor(e){this.products=[],this.localStorage=new i.W_("product"),this.setProducts(e),this.setProducts((0,i.GZ)(this.getProducts(),this.localStorage))}setProducts(e){this.products=e.products?e.products:e}getProducts(){return this.products}changeProduct(e,t,r){this.products.forEach((i=>{i.id==e&&(i[t]=r)})),console.log(this.products)}}},286:(e,t,r)=>{r.d(t,{u:()=>o});var i=r(54),s=r(860);const n=document.querySelector("#categories"),a=document.querySelector(".filter__button"),l=document.querySelector(".results__info--empty-block");class o{constructor(e){this.productListPresenter=e,a.addEventListener("click",this.formFilterHandler.bind(this)),n.addEventListener("change",this.filterCategoryHandler.bind(this))}formFilterHandler(e){e.preventDefault();const t=document.filterForm,r=new FormData(t);let s=[...this.productListPresenter.products],n=Array.from(r.keys()),a={};for(const e of n){const t=r.getAll(e);a[e]=t}s=s.filter((e=>{for(const t in a)if(0==(0,i.HT)(e,a,t))return!1;return!0}));const o=document.querySelectorAll(".rs-tooltip .rs-tooltip__value"),c=[Number(o[0].textContent),Number(o[1].textContent)];s=s.filter((e=>e.price>=c[0]&&e.price<=c[1])),s=(0,i.wr)(this.productListPresenter.currentFilter,s),this.productListPresenter.outputListProducts=s,0==s.length?(l.classList.remove("hidden"),this.productListPresenter.clearElements()):(l.classList.add("hidden"),this.productListPresenter.clearElements(),this.productListPresenter.renderProducts(s),this.productListPresenter.productClickHandler(),this.productListPresenter.previewPhotoMouseOverHandler())}filterCategoryHandler(e){this.productListPresenter.currentCategory=e.target.value;let t=[];if(this.productListPresenter.currentCategory===s.a9.ALL)t=[...this.productListPresenter.products];else for(const e of this.productListPresenter.products)e.category===this.productListPresenter.currentCategory&&t.push(e);t=(0,i.wr)(this.productListPresenter.currentFilter,t),this.productListPresenter.outputListProducts=[...t];const r=this.productListPresenter.getRangePrice(this.productListPresenter.outputListProducts);this.productListPresenter.filterRangeView.setPriceRange(r),l.classList.add("hidden"),this.productListPresenter.clearElements(),this.productListPresenter.renderProducts(this.productListPresenter.outputListProducts),this.productListPresenter.productClickHandler(),this.productListPresenter.previewPhotoMouseOverHandler(),this.productListPresenter.renderFilterCategory()}}},812:(e,t,r)=>{r.d(t,{x:()=>v});var i=r(54),s=r(860),n=r(678),a=r(461);class l{constructor(e){this.product=e,this.currentActivePreview=null,this.map=null}getTemplate(){return`<section class="popup" id="${(e=this.product).id}">\n        <div class="popup__inner">\n          <button class="popup__close" type="button" aria-label="Закрыть">\n            <svg id="popup__close" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n              <path id="popup__close--path" fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L8 6.58579L14.2929 0.292893C14.6834 -0.0976311 15.3166 -0.0976311 15.7071 0.292893C16.0976 0.683418 16.0976 1.31658 15.7071 1.70711L9.41421 8L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L8 9.41421L1.70711 15.7071C1.31658 16.0976 0.683418 16.0976 0.292893 15.7071C-0.0976311 15.3166 -0.0976311 14.6834 0.292893 14.2929L6.58579 8L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893Z"/>\n            </svg>\n          </button>\n          <div class="popup__date" title="${e.dateString}">${e.dateDifference}</div>\n          <h3 class="popup__title">${e.name}</h3>\n          <div class="popup__price">${e.price} ₽</div>\n          <div class="popup__columns">\n            <div class="popup__left">\n              <div class="popup__gallery gallery">\n                <button class="gallery__favourite fav-add ${e.isFavorite&&"fav-add--checked"}">\n                  <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3 7C3 13 10 16.5 11 17C12 16.5 19 13 19 7C19 4.79086 17.2091 3 15 3C12 3 11 5 11 5C11 5 10 3 7 3C4.79086 3 3 4.79086 3 7Z" stroke="white" stroke-width="2" stroke-linejoin="round"/>\n                  </svg>\n                </button>\n                <div class="gallery__main-pic">\n                  <img src="${e.photos[0]}" srcset="${e.photos[0]}" width="520" height="340" alt="${e.name} - основное фото">\n                </div>\n                <ul class="gallery__list">\n                    ${e.photos.map(((e,t)=>`<li class="gallery__item">\n                    <img src="${e}" srcset="${e}" alt="${t}" width="124" height="80" data-photo-index="${t}"/>\n                  </li>`)).join("")}                                \n                </ul>\n              </div>\n              <ul class="popup__chars chars">\n                ${(r=e.filters,Object.keys(r).filter((e=>"-"!==r[e]))).map((t=>`<li class="chars__item">\n                  <div class="chars__name">${(0,n.ys)(e.category,t)}</div>\n                  <div class="chars__value">${(0,n.NU)(e.category,e.filters[t])}</div>\n                </li>`)).join("")}           \n              </ul>\n              <div class="popup__seller seller ${t=e.seller.rating,t>=4.8?"seller--good":t<4?"seller--bad":""}">\n                <h3>Продавец</h3>\n                <div class="seller__inner">\n                  <a class="seller__name" href="#">${e.seller.fullname}</a>\n                  <div class="seller__rating"><span>${e.seller.rating}</span></div>\n                </div>\n              </div>\n              <div class="popup__description">\n                <h3>Описание товара</h3>\n                <p>${e.description}</p>\n              </div>\n            </div>\n            <div class="popup__right">\n              <div class="popup__map" id="map" style="width: 268px; height: 200px"></div>\n              <div class="popup__address">${e.address.city}, ${e.address.street}, ${e.address.building}</div>\n            </div>\n          </div>\n        </div>\n      </section>`;var e,t,r}renderMap(){document.querySelector("#map");const{coordinates:e}=this.product;console.log(e),new ymaps.Map("map",{center:[...e],controls:["zoomControl"],zoom:12}).geoObjects.add(new ymaps.Placemark([...e],{balloonContent:`${this.product.address.city}`},{preset:"islands#icon",iconColor:"#0095b6"}))}closeModal(){this.map.remove()}mainPhotoClickHandler(e){this.currentActivePreview&&this.currentActivePreview.classList.remove("gallery__item--active"),e.target.parentNode.classList.add("gallery__item--active"),this.currentActivePreview=e.target.parentNode;const{photoIndex:t}=e.target.dataset,r=this.product.photos[t];if(!r)return;const i=document.querySelector(".gallery__main-pic img");(0,a.M)(r,(()=>{i.setAttribute("src",r),i.setAttribute("srcset",r)}))}}class o{constructor(e){this.priceRange=e}setPriceRange(e){this.priceRange=e}getPriceRange(){return this.priceRange}getTemplate(){return'<div class="filter__range">\n  <label for="range">Цена, ₽</label>\n  <div class="rs-tooltip-container"><div class="rs-tooltip">от <span class="rs-tooltip__value"></span></div><div class="rs-tooltip">до <span class="rs-tooltip__value"></span></div></div>\n  <div class="filter__slider" id="slider" ></div>\n</div>'}removeElement(){this.range.destroy()}renderSlider(){const e=document.getElementById("slider"),t=document.querySelectorAll(".rs-tooltip .rs-tooltip__value");this.range=noUiSlider.create(e,{start:this.priceRange,connect:!0,step:1e3,range:{min:this.priceRange[0],max:this.priceRange[1]}}),e.noUiSlider.on("update",(function(e,r){t[r].innerHTML=`${Math.round(e[r])}`}))}}const c=document.querySelector(".results__list"),d=document.querySelector("main"),u=new i.W_("product"),p=document.querySelector(".sorting__favourites"),h=document.querySelector(".results__info.favourites");class v{constructor(e){this.currentCategory=s.a9.ALL,this.productModel=e,this.products=e.products,this.outputListProducts=e.products,this.filterRangeView=new o(this.getRangePrice()),this.currentFilter="sort-popular",p.addEventListener("click",this.sortingFavourites.bind(this))}renderProducts(e=this.products){for(let r=0;r<e.length;r++){let n=`<li class="results__item product" id="${(t=e[r]).id}">\n                    <button class="product__favourite fav-add ${t.isFavorite&&"fav-add--checked"}" type="button" aria-label="Добавить в избранное" id="add-to-favorite">\n                      <svg class="product__favourite--svg" width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path id="product__favourite--path" fill-rule="evenodd" clip-rule="evenodd" d="M3 7C3 13 10 16.5 11 17C12 16.5 19 13 19 7C19 4.79086 17.2091 3 15 3C12 3 11 5 11 5C11 5 10 3 7 3C4.79086 3 3 4.79086 3 7Z" stroke="white" stroke-width="2" stroke-linejoin="round"/>\n                      </svg>\n                    </button>\n                    <div class="product__image">\n                      <div class="product__image-navigation">\n                            ${t.photos.slice(0,s.CI).map(((e,t)=>`<div class="product__navigation-column" data-photo-index="${t}">\n                                <span></span>\n                              </div>`)).join("")}\n                      </div>\n                      <div class="product__image-more-photo hidden"></div>\n                      <img src="${t.photos[0]}" srcset="${t.photos[0]} 2x" width="318" height="220" alt="${t.name}">\n                    </div>\n                    <div class="product__content">\n                      <h3 class="product__title">\n                        <a href="#" class="product__name">${t.name}</a>\n                      </h3>\n                      <div class="product__price">${t["formatted-price"]} ₽</div>\n                      <div class="product__address">${t.address.city}, ${t.address.street}</div>\n                      <div class="product__date" title="${t.dateString}">${t.dateDifference}</div>\n                    </div>\n                  </li>`;(0,i.sY)(n,c,i.ee.AFTERBEGIN)}var t}previewPhotoMouseOverHandler(){document.querySelectorAll(".results__item").forEach((e=>{e.addEventListener("mouseover",(t=>{if("product__navigation-column"==t.target.classList){const r=e.id,s=Number(t.target.dataset.photoIndex);let n;for(let e of this.products)e.id==r&&(n=e.photos[s]);if(!n)return;const a=e.querySelector(".product__image img");(0,i.MA)(n,(()=>{a.setAttribute("src",n),a.setAttribute("srcset",n)}))}}))}))}productClickHandler(){document.querySelectorAll(".results__item").forEach((e=>{e.addEventListener("click",(t=>{if("product__name"==t.target.classList||"product__navigation-column"==t.target.classList){const t=e.id;let r;for(let e of this.products)e.id==t&&(r=new l(e));const i=r.getTemplate();this.renderModalView(i),this.popupHandler(),ymaps.ready(r.renderMap())}if("product__favourite--svg"==t.target.id||"product__favourite--path"==t.target.id){console.log("click to heart");const t=e.querySelector(".product__favourite");t.classList.contains("fav-add--checked")?t.classList.remove("fav-add--checked"):t.classList.add("fav-add--checked"),this.favouriteHandler(e)}}))}))}rangeContainerInit(){const e=document.querySelector(".filter__category-filters"),t=this.filterRangeView.getTemplate();(0,i.sY)(t,e),this.filterRangeView.renderSlider()}getRangePrice(e=this.products){const t=[e[0].price,e[0].price];for(const r of e)t[0]>r.price&&(t[0]=r.price),t[1]<r.price&&(t[1]=r.price);return t}favouriteHandler(e){const t=function(e,t){for(let r of e)if(r.id==t)return r}(this.products,e.id);u.getJSON(e.id)?(u.delete(e.id),this.productModel.changeProduct(e.id,"isFavorite",!1),this.products=this.productModel.products):(t.isFavorite=!0,console.log(t),u.setJSON(e.id,t),this.productModel.changeProduct(e.id,"isFavorite",!0),this.products=this.productModel.products)}clearElements(e=c){for(;e.firstChild;)e.removeChild(e.firstChild)}sortingFavourites(e){if(e.preventDefault(),e.currentTarget.classList.contains("active"))h.classList.add("hidden"),this.clearElements(),this.renderProducts(this.outputListProducts),this.productClickHandler(),this.previewPhotoMouseOverHandler();else{const e=u.getSize();this.clearElements();let t=[];for(let r=0;r<e;r++)window.localStorage.key(r).includes("product")&&t.push(u.getJSON(window.localStorage.key(r)));0==t.length?h.classList.remove("hidden"):(this.renderProducts(t),this.productClickHandler(),this.previewPhotoMouseOverHandler())}e.currentTarget.classList.toggle("active")}popupHandler(){const e=document.querySelector(".popup"),t=e.querySelector(".gallery__list"),r=e.querySelector(".gallery__main-pic").firstElementChild;t.addEventListener("click",(e=>{if("IMG"==e.target.tagName){const s=e.target.src;for(let e of t.children)e.classList.remove("gallery__item--active");e.target.parentNode.classList.add("gallery__item--active"),(0,i.MA)(s,(()=>{r.setAttribute("src",s),r.setAttribute("srcset",s)}))}})),e.querySelector(".gallery__favourite").addEventListener("click",(t=>{console.log(t.currentTarget),this.favouriteHandler(e),console.log(e)}))}renderFilterCategory(){const e=document.querySelector(".filter__category-filters"),t=this.getCategoryFiltersView();if(this.clearElements(e),this.filterRangeView.removeElement(),this.currentCategory===s.a9.ALL)return(0,i.sY)(t,e),void this.filterRangeView.renderSlider();(0,i.sY)(this.filterRangeView.getTemplate(),e),this.filterRangeView.renderSlider(),(0,i.sY)(t,e)}getCategoryFiltersView(){switch(this.currentCategory){case s.a9.ALL:return this.filterRangeView.getTemplate();case s.a9.ESTATE:return`<div class="filter__estate">\n                  <fieldset class="filter__type filter__type--estate">\n                    <legend>Тип недвижимости</legend>\n                    <ul class="filter__checkboxes-list filter__checkboxes-list--estate">\n                      ${(e=s.u8).estate.type.slice().map((e=>`<li class="filter__checkboxes-item">\n                        <input class="visually-hidden" type="checkbox" name="type" value="${e.value}" id="${e.id}">\n                        <label for="${e.id}">${e.name}</label>\n                      </li>`)).join("")}\n                    </ul>\n                  </fieldset>\n                  <div class="filter__min-square">\n                    <label for="square">Минимальная площать, м<sup>2</sup></label>\n                    <input type="number" id="square" name="area" min="1" value="0" placeholder="0">\n                  </div>\n                  <fieldset class="filter__radiobuttons filter__radiobuttons--ram">\n                    <legend>Количество комнат</legend>\n                    <ul class="filter__ram-list">\n                      ${e.estate.roomsCount.slice().map((e=>`<li class="filter__radiobuttons-item">\n                        <input class="visually-hidden" type="radio" name="rooms-count" value="${e.value}" ${e.checked?"checked":""} id="${e.id}">\n                        <label for="${e.id}">${e.name}</label>\n                      </li>`)).join("")}\n                    </ul>\n                  </fieldset>\n                </div>`;case s.a9.LAPTOPS:return(e=>`<div class="filter__laptop">\n                  <fieldset class="filter__type filter__type--laptop">\n                    <legend>Тип ноутбука</legend>\n                    <ul class="filter__checkboxes-list filter__checkboxes-list--laptop-ram">\n                      ${e.laptop.type.slice().map((e=>`<li class="filter__checkboxes-item">\n                        <input class="visually-hidden" type="checkbox" name="type" value="${e.value}" id="${e.id}">\n                        <label for="${e.id}">${e.name}</label>\n                      </li>`)).join("")}\n                    </ul>\n                  </fieldset>\n                  <fieldset class="filter__radiobuttons filter__radiobuttons--ram">\n                    <legend>Минимальный объем оперативной памяти</legend>\n                      <ul class="filter__radiobuttons-list">\n                        ${e.laptop.ram.slice().map((e=>`<li class="filter__radiobuttons-item">\n                          <input class="visually-hidden" type="radio" name="ram-value" value="${e.value}" id="${e.id}" ${e.checked?"checked":""}>\n                          <label for="${e.id}">${e.name}</label>\n                        </li>`)).join("")}\n                      </ul>\n                    </fieldset>\n                    <fieldset class="filter__radiobuttons filter__radiobuttons--diagonal">\n                      <legend>Минимальная диагональ экрана</legend>\n                      <ul class="filter__radiobuttons-list">\n                        ${e.laptop.screenSize.slice().map((e=>`<li class="filter__radiobuttons-item">\n                          <input class="visually-hidden" type="radio" name="screen-size" value="${e.value}" id="${e.id}" ${e.checked?"checked":""}>\n                          <label for="${e.id}">${e.name}<sup>″</sup></label>\n                        </li>`)).join("")}\n                      </ul>\n                    </fieldset>\n                    <fieldset class="filter__type filter__type--laptop-processor">\n                      <legend>Тип процессора</legend>\n                      <ul class="filter__checkboxes-list filter__checkboxes-list--laptop-processor">\n                        ${e.laptop.cpu.slice().map((e=>`<li class="filter__checkboxes-item">\n                          <input class="visually-hidden" type="checkbox" name="cpu-type" value="${e.value}" id="${e.id}">\n                          <label for="${e.id}">${e.name}</label>\n                        </li>`)).join("")}\n                      </ul>\n                    </fieldset>\n                  </div>`)(s.u8);case s.a9.CAMERA:return(e=>`<div class="filter__camera">\n                        <fieldset class="filter__type filter__type--camera">\n                            <legend>Тип фотоаппарата</legend>\n                            <ul class="filter__checkboxes-list filter__checkboxes-list--camera">\n                                ${e.camera.type.slice().map((e=>`<li class="filter__checkboxes-item">\n                                    <input class="visually-hidden" type="checkbox" name="type" value="${e.value}" id="${e.id}">\n                                    <label for="${e.id}">${e.name}</label>\n                                </li>`)).join("")}\n                            </ul>\n                        </fieldset>\n                        <div class="filter__select-wrapper filter__select-wrapper--min-resolution">\n                            <label for="resolution-matrix">Минимальное разрешение матрицы</label>\n                            <select id="resolution-matrix" name="matrix-resolution">\n                                ${e.camera.matrix.slice().map((e=>`<option value="${e.value}" ${e.selected?"selected":""}>${e.name}</option>`)).join("")}\n                            </select>\n                            <svg width="14" height="8" viewBox="0 0 14 8" xmlns="http://www.w3.org/2000/svg">\n                                <path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683417 14.0976 1.31658 13.7071 1.70711L7.70711 7.70711C7.31658 8.09763 6.68342 8.09763 6.29289 7.70711L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z" />\n                            </svg>\n                        </div>\n                        <div class="filter__select-wrapper">\n                            <label for="resolution-video">Минимальное разрешение видео</label>\n                            <select id="resolution-video" name="supporting">\n                                ${e.camera.video.slice().map((e=>`<option value="${e.value}" ${e.selected?"selected":""}>${e.name}</option>`)).join("")}\n                            </select>\n                            <svg width="14" height="8" viewBox="0 0 14 8" xmlns="http://www.w3.org/2000/svg">\n                                <path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683417 14.0976 1.31658 13.7071 1.70711L7.70711 7.70711C7.31658 8.09763 6.68342 8.09763 6.29289 7.70711L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z" />\n                            </svg>\n                        </div>\n                    </div>`)(s.u8);case s.a9.CARS:return(e=>`<div class="filter__car">\n                    <div class="filter__select-wrapper">\n                      <label for="resolution-video">Минимальный год выпуска</label>\n                      <select id="car_year" name="production-year">\n                        ${e.car.productionYear.slice().map((e=>`<option value="${e.value}" ${e.selected?"selected":""}>${e.name}</option>`)).join("")}\n                      </select>\n                      <svg width="14" height="8" viewBox="0 0 14 8" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683417 14.0976 1.31658 13.7071 1.70711L7.70711 7.70711C7.31658 8.09763 6.68342 8.09763 6.29289 7.70711L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z" />\n                      </svg>\n                    </div>\n                    <fieldset class="filter__radiobuttons filter__radiobuttons--transmission">\n                      <legend>Коробка передач</legend>\n                      <ul class="filter__radiobuttons-list">\n                        ${e.car.transmission.slice().map((e=>`<li class="filter__radiobuttons-item">\n                          <input class="visually-hidden" type="radio" name="transmission" value="${e.value}" id="${e.id}" ${e.checked?"checked":""}>\n                          <label for="${e.id}">${e.name}</label>\n                        </li>`)).join("")}\n                      </ul>\n                    </fieldset>\n                    <fieldset class="filter__type filter__type--car-body">\n                      <legend>Тип кузова</legend>\n                      <ul class="filter__checkboxes-list filter__checkboxes-list--car-body">\n                        ${e.car.bodyType.slice().map((e=>`<li class="filter__checkboxes-item">\n                          <input class="visually-hidden" type="checkbox" name="body-type" value="${e.value}" id="${e.id}">\n                          <label for="${e.id}">${e.name}</label>\n                        </li>`)).join("")}\n                      </ul>\n                    </fieldset>\n                  </div>`)(s.u8);default:return this.filterRangeView.getTemplate()}var e}renderModalView(e){(0,i.sY)(e,d,i.ee.AFTEREND)}init(){this.renderProducts(),this.previewPhotoMouseOverHandler(),this.productClickHandler(),this.rangeContainerInit()}}},904:(e,t,r)=>{r.d(t,{n:()=>n});var i=r(54);const s=document.querySelector(".sorting__order-list");class n{constructor(e){this.productListPresenter=e,s.addEventListener("click",this.sortingTabListHandler.bind(this))}sortingTabListHandler(e){e.preventDefault();const t=e.target.getAttribute("for");this.productListPresenter.currentFilter=t;const r=(0,i.wr)(this.productListPresenter.currentFilter,this.productListPresenter.outputListProducts);this.productListPresenter.clearElements(),this.productListPresenter.renderProducts(r),this.productListPresenter.productClickHandler(),this.productListPresenter.previewPhotoMouseOverHandler()}}},450:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var i=r(54),s=r(472),n=r(812),a=r(904),l=r(286);(0,i.g_)();let e=new s.F(await(0,i.zD)()),o=new n.x(e);new a.n(o),new l.u(o),o.init(),t()}catch(e){t(e)}}),1)},461:(e,t,r)=>{r.d(t,{M:()=>i});const i=(e,t)=>{const r=new Image;r.src=e,r.onload=t}},54:(e,t,r)=>{r.d(t,{W_:()=>a,GZ:()=>b,HT:()=>c,zD:()=>f,g_:()=>y,MA:()=>n.M,sY:()=>s,ee:()=>i,wr:()=>p});const i={AFTERBEGIN:"afterbegin",BEFOREEND:"beforeend",AFTEREND:"afterend"},s=(e,t,r=i.BEFOREEND)=>{switch(r){case i.AFTERBEGIN:t.insertAdjacentHTML(i.AFTERBEGIN,e);break;case i.BEFOREEND:t.insertAdjacentHTML(i.BEFOREEND,e);break;case i.AFTEREND:t.insertAdjacentHTML(i.AFTEREND,e)}};var n=r(461);class a{constructor(e){this.prefix=`${e}@`}getItem(e,t){try{return window.localStorage.getItem(this.prefix+e)}catch(e){console.log(e)}}setItem(e,t){try{return window.localStorage.setItem(this.prefix+e,t)}catch(e){console.log(e)}}setJSON(e,t){try{const r=JSON.stringify(t);return window.localStorage.setItem(this.prefix+e,r)}catch(e){console.error(e)}}getJSON(e){e=String(e);try{const t=e.includes(this.prefix)?window.localStorage.getItem(e):window.localStorage.getItem(this.prefix+e);return null===t?null:JSON.parse(t)}catch(e){console.error(e)}}getSize(){return window.localStorage.length}delete(e){window.localStorage.removeItem(this.prefix+e)}clearAll(){window.localStorage.clear()}}const l=["production-year","matrix-resolution","screen-size","ram-value","area","supporting"],o=new Map([["HD",1],["full-hd",2],["4K",3],["5K",4]]),c=(e,t,r)=>{let i=0;for(const s of t[r]){if("any"==s)return!0;if("categories"==r){if(e.category==s)return!0}else l.includes(r)||"rooms-count"==r&&"5"==s?"supporting"==r?o.get(e.filters[r])>=o.get(s)&&i++:e.filters[r]>=s&&i++:e.filters[r]==s&&i++}return i>0},d=document.querySelector(".sorting__order-list");function u(e){return(t,r)=>t[e]>r[e]?1:-1}function p(e,t){d.querySelectorAll(".sorting__order-tab").forEach((t=>{t.firstElementChild.id==e?t.firstElementChild.checked=!0:t.firstElementChild.checked=!1}));let r=[...t];return"sort-cheap"==e&&(r=r.sort(u("price")).reverse()),"sort-new"==e&&(r=r.sort(u("publish-date"))),r}const h=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],v={1:"день",2:"дня",3:"дня",4:"дня",5:"дней",6:"дней",7:"дней"},m=e=>{if(!(e instanceof Date))return null;const t=new Date,r=(t-e)/864e5;return e.getFullYear()!==t.getFullYear()?`${e.getDate()} ${h[e.getMonth()]} ${e.getFullYear()} года`:r>7?`${e.getDate()} ${h[e.getMonth()]}`:r>1&&r<=7?`${Math.floor(r)} ${v[Math.round(r)]} назад`:`${Math.round(24*r)} час(ов) назад`},_=e=>`${e.getDate()} ${h[e.getMonth()]} ${e.getFullYear()}`;var g=r(678);async function f(){const e=await fetch("https://main-shop-fake-server.herokuapp.com/db",{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()}const y=()=>{document.addEventListener("click",(e=>{if("popup__close"==e.target.id||"popup__close"==e.target.classList||"path"==e.target.tagName&&"popup__close--path"==e.target.id){const e=document.querySelector(".popup");document.body.removeChild(e)}}))};function b(e=this.products,t){return e.map(((e,r)=>{const i=(s=e["publish-date"],new Date(Number(s)));var s;return{...e,id:r+1,category:(0,g.Zv)(e.category),"formatted-price":(0,g.T4)(e.price),dateString:_(i),dateDifference:m(i),isFavorite:!!t.getJSON(String(r+1)),date:i}}))}},678:(e,t,r)=>{r.d(t,{NU:()=>d,T4:()=>s,Zv:()=>o,ys:()=>c});var i=r(860);const s=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&thinsp;"),n={Недвижимость:i.a9.ESTATE,Ноутбук:i.a9.LAPTOPS,Фотоаппарат:i.a9.CAMERA,Автомобиль:i.a9.CARS},a={[i.a9.ESTATE]:{type:"Тип недвижимости",area:"Площадь, м2","rooms-count":"Количество комнат"},[i.a9.LAPTOPS]:{type:"Тип ноутбука","ram-value":"Объем оперативной памяти","screen-size":"Диагональ экрана","cpu-type":"Тип процессора"},[i.a9.CAMERA]:{type:"Тип фотоаппарата","matrix-resolution":"Разрешение матрицы",supporting:"Разрешение видео"},[i.a9.CARS]:{type:"Тип кузова",transmission:"Коробка передач","production-year":"Год выпуска"}},l={[i.a9.ESTATE]:{flat:"Квартира",house:"Дом",apartment:"Апартаменты"},[i.a9.LAPTOPS]:{i3:"Intel Core i3",i5:"Intel Core i5",i7:"Intel Core i7",4:"4 Гб",8:"8 Гб",16:"16 Гб",ultrabook:"Ультрабук",home:"Домашний ноутбук",gaming:"Игровой ноутбук"},[i.a9.CAMERA]:{slr:"Зеркальный",digital:"Цифровой",mirrorless:"Беззеркальный",hd:"HD","full-hd":"Full HD","4k":"4K","5k":"5K"},[i.a9.CARS]:{auto:"Автомат",mechanic:"Механическая",sedan:"Седан",universal:"Универсал",hatchback:"Хэтчбэк",suv:"Внедорожник",coupe:"Купэ"}},o=e=>n[e],c=(e,t)=>a[e][t],d=(e,t)=>l[e][t]?l[e][t]:t}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return s[e](r,r.exports,a),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(s,n,a)=>{var l;a&&((l=[]).d=1);var o,c,d,u=new Set,p=s.exports,h=new Promise(((e,t)=>{d=t,c=e}));h[t]=p,h[e]=e=>(l&&e(l),u.forEach(e),h.catch((e=>{}))),s.exports=h,n((s=>{var n;o=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var n=[];n.d=0,s.then((e=>{a[t]=e,i(n)}),(e=>{a[r]=e,i(n)}));var a={};return a[e]=e=>e(n),a}}var l={};return l[e]=e=>{},l[t]=s,l})))(s);var a=()=>o.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(n=()=>t(a)).r=0;var r=e=>e!==l&&!u.has(e)&&(u.add(e),e&&!e.d&&(n.r++,e.push(n)));o.map((t=>t[e](r)))}));return n.r?c:a()}),(e=>(e?d(h[r]=e):c(p),i(l)))),l&&(l.d=0)},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(450)})();